<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Therapy Room</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  font-family: 'Montserrat', sans-serif;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #ffffff;
  color: #000;
  flex-direction: column;
  gap: 20px;
  padding: 40px 20px;
}
.panel {
  width: 420px;
  padding: 35px 30px;
  border-radius: 22px;
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(155, 89, 182, 0.3);
  box-shadow: 0 0 30px rgba(155, 89, 182, 0.15);
  backdrop-filter: blur(10px);
  text-align: center;
}
h2, h1 {
  font-family: 'Playfair Display', serif;
  background: linear-gradient(90deg, #9b59b6, #5e2ca5);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
h2 { font-size: 1.1rem; margin-bottom: 15px; font-weight:700;}
h1 { font-size: 1.8rem; margin-bottom: 20px; font-weight:700;}
input, select {
  margin-top: 10px;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #aaa;
  outline: none;
  width: 100%;
  font-size: 1rem;
  font-weight: 500;
  background: #f0f0f0;
  color: #5e2ca5;
  transition: 0.3s;
}
input:focus, select:focus {
  border-color: #9b59b6;
  box-shadow: 0 0 10px #9b59b6;
}
button {
  padding: 12px 28px;
  border: none;
  background: linear-gradient(90deg, #9b59b6, #5e2ca5);
  color: #fff;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 30px;
  cursor: pointer;
  margin-top: 15px;
  transition: 0.3s;
  box-shadow: 0 0 15px rgba(155, 89, 182, 0.5);
}
button:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 0 25px rgba(155, 89, 182, 0.8);
}
a {
  margin-top: 15px;
  display: inline-block;
  word-break: break-word;
  color: #9b59b6;
  font-weight: bold;
  transition: 0.3s;
}
a:hover { text-shadow: 0 0 10px #9b59b6; }
.loader { display: none; margin-top: 15px; font-size: 1rem; color: #9b59b6;}
.link-container { display: none; margin-top: 20px;}
.social-icons { margin-top: 25px; display: flex; justify-content: center; gap: 18px;}
.social-icons img { width: 55px; height: 60px; border-radius: 50%; object-fit: cover; display: block; border: none;}
.logo-container { display:flex; justify-content:center; align-items:center; height:150px;}
.logo { max-width:100%; height:300px; animation: spin 10s linear infinite;}
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
</style>
</head>
<body>
<div class="panel">
  <div class="logo-container">
    <img src="LOGO DEAR THERAPIST (1).png" alt="Logo" class="logo" />
  </div>

  <h2>üå∏ Welcome to Dr Shaveta‚Äôs Therapy Room üå∏</h2>
  <h1>Enter Password & Generate Link</h1>

  <input type="password" id="meetingPassword" placeholder="Enter password">
  <label>Select Duration (Minutes):</label>
  <select id="meetingDuration">
    <option value="5">5 Minute</option>
    <option value="10">10 Minute</option>
    <option value="15">15 Minutes</option>
    <option value="30" selected>30 Minutes</option>
    <option value="60">60 Minutes</option>
    <option value="90">90 Minutes</option>
    <option value="120">120 Minutes</option>
    <option value="180">180 Minutes</option>
  </select>

  <button id="generateLinkBtn">Generate Link</button>

  <div class="link-container" id="linkContainer">
    <p>Your Meeting Link:</p>
    <a href="#" id="meetingLink" target="_blank"></a>
    <br><br>
    <button id="copyBtn">Copy Link</button>
  </div>

  <div class="loader" id="loader">Generating link‚Ä¶</div>
</div>

<script>
(function(){
  const BASE = 'https://hdigitalpro7.github.io/videomeeting';
  const PASSWORD = "Wealthy@62";
  const generateLinkBtn = document.getElementById('generateLinkBtn');
  const meetingPassword = document.getElementById('meetingPassword');
  const meetingDuration = document.getElementById('meetingDuration');
  const linkContainer = document.getElementById('linkContainer');
  const meetingLink = document.getElementById('meetingLink');
  const copyBtn = document.getElementById('copyBtn');
  const loader = document.getElementById('loader');

  function makeId(len=8){ return Math.random().toString(36).substring(2,2+len);}
  function setActiveMeeting(meetingId,duration){
    localStorage.setItem("activeMeeting",JSON.stringify({
      id:meetingId,
      duration:duration,
      created:Date.now(),
      joinCount:0
    }));
  }
  function getActiveMeeting(){
    try{ return JSON.parse(localStorage.getItem("activeMeeting")) || null; } catch{return null;}
  }

  function generateLink(){
    const entered = meetingPassword.value;
    if(entered !== PASSWORD){ alert("‚ùå Incorrect password!"); return; }

    const duration = meetingDuration.value;
    const meetingId = makeId();
    setActiveMeeting(meetingId,duration);
    const link = `${BASE}/WEB_UIKITS.html?meetingId=${encodeURIComponent(meetingId)}&duration=${encodeURIComponent(duration)}`;

    loader.style.display = 'block';
    linkContainer.style.display = 'none';

    setTimeout(()=>{
      loader.style.display='none';
      meetingLink.href = link;
      meetingLink.textContent = link;
      linkContainer.style.display='block';
    },700);
  }

  generateLinkBtn.addEventListener('click', generateLink);

  copyBtn.addEventListener('click', ()=>{
    const url = meetingLink.href || '';
    if(!url) return alert('No meeting link to copy.');
    navigator.clipboard.writeText(url).then(()=>alert('‚úÖ Meeting link copied!'))
    .catch(()=>alert('Could not copy automatically. Copy manually: ' + url));
  });

  window.addEventListener('load', ()=>{
    const params = new URLSearchParams(window.location.search);
    const openedId = params.get('meetingId');
    if(!openedId) return;

    const active = getActiveMeeting();
    if(!active || active.id!==openedId){
      document.body.innerHTML="<h2 style='color:red;text-align:center;margin-top:50px;'>‚ùå This meeting link has expired</h2>";
      return;
    }

    active.joinCount = (active.joinCount || 0)+1;
    if(active.joinCount>2){
      document.body.innerHTML="<h2 style='color:red;text-align:center;margin-top:50px;'>‚ùå This meeting link has expired</h2>";
      localStorage.removeItem('activeMeeting');
    }else{
      localStorage.setItem('activeMeeting',JSON.stringify(active));
    }
  });
})();
</script>
</body>
</html>
